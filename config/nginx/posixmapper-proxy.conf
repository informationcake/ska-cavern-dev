# --- File: ~/ska-cavern-dev/config/nginx/posixmapper-proxy.conf ---
server {
    listen 8080;
    listen [::]:8080;

    server_name localhost;

    # Proxy for PosixMapper capabilities and other paths
    # This acts as the external facing endpoint for posix-mapper
    location /posix-mapper/capabilities {
        proxy_pass http://posixmapper:8080/posix-mapper/capabilities;
    }

    location /posix-mapper/ {
        proxy_pass http://posixmapper:8080/posix-mapper/;
    }

    # You might have other specific OIDC proxying here if posixmapper-proxy handles that.
    # Based on Patrick's config, OIDC is often served by the 'reg' service directly or an external IAM.
    # If this proxy is ONLY for posix-mapper, then other OIDC locations might not be needed here.
}